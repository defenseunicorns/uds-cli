kind: ZarfPackageConfig
metadata:
  name: gitrepo
  version: 0.0.1

components:
  - name: dubbd-repo
    required: true
    repos:
      - https://github.com/defenseunicorns/uds-package-dubbd
  - name: nginx-remote
    required: true
    manifests:
      - name: simple-nginx-deployment
        namespace: nginx
        files:
          # remote manifests are specified with a URL and you can verify integrity of a manifest
          # by adding a sha256sum to the end of the URL, separated by an @:
          - https://k8s.io/examples/application/deployment.yaml@c57f73449b26eae02ca2a549c388807d49ef6d3f2dc040a9bbb1290128d97157
          # this sha256 can be discovered using:
          # zarf prepare sha256sum https://k8s.io/examples/application/deployment.yaml
    actions:
      onDeploy:
        # the following checks were computed by viewing the success state of the package deployment
        # and creating `wait` actions that match
        after:
          - wait:
              cluster:
                kind: deployment
                name: nginx-deployment
                namespace: nginx
                condition: available
    # image discovery is supported in all manifests and charts using:
    # zarf prepare find-images
    images:
      - docker.io/library/nginx:1.14.2
  - name: podinfo
    required: true
    charts:
      - name: podinfo
        version: 6.4.0
        namespace: podinfo
        url: https://github.com/stefanprodan/podinfo.git
        gitPath: charts/podinfo
    images:
      - ghcr.io/stefanprodan/podinfo:6.4.0
    actions:
      onDeploy:
        after:
          - wait:
              cluster:
                kind: deployment
                name: podinfo
                namespace: podinfo
                condition: available
